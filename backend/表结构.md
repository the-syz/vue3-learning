# 数据库表结构说明

以下是 `h:\vue3_learning\backend\database.py` 文件中定义的表结构：

## users 表（User 模型）
```python
class User(Model):
    id = fields.UUIDField(pk=True)  # 主键，UUID类型
    name = fields.CharField(max_length=100)  # 姓名
    addr = fields.CharField(max_length=200)  # 地址（仅包含省市信息）
    age = fields.IntField()  # 年龄
    birth = fields.DateField()  # 出生日期
    sex = fields.IntField()  # 性别（0: 女, 1: 男）
    create_time = fields.DatetimeField(auto_now_add=True)  # 创建时间，自动添加
    # 外键关联到Account表，表示这个客户由哪个员工负责
    salesperson = fields.ForeignKeyField('models.Account', related_name='customers', null=True)

    class Meta:
        table = "users"
```

## products 表（Product 模型）
```python
class Product(Model):
    id = fields.IntField(pk=True, generated=True)  # 主键，自增整数
    name = fields.CharField(max_length=100)  # 产品名称
    today_buy = fields.IntField()  # 今日购买量
    month_buy = fields.IntField()  # 本月购买量
    total_buy = fields.IntField()  # 总购买量

    class Meta:
        table = "products"
```

## chart_data 表（ChartData 模型）
```python
class ChartData(Model):
    id = fields.IntField(pk=True, generated=True)  # 主键，自增整数
    data_type = fields.CharField(max_length=50)  # 数据类型（orderData, videoData, userData）
    content = fields.TextField()  # 存储JSON格式的数据

    class Meta:
        table = "chart_data"
```

## menus 表（Menu 模型）
```python
class Menu(Model):
    id = fields.IntField(pk=True, generated=True)  # 主键，自增整数
    path = fields.CharField(max_length=100)  # 路径
    name = fields.CharField(max_length=100)  # 名称
    label = fields.CharField(max_length=100)  # 标签
    icon = fields.CharField(max_length=100)  # 图标
    url = fields.CharField(max_length=100)  # URL
    parent_id = fields.IntField(null=True)  # 父菜单ID，用于树形结构

    # 多对多关系：一个菜单项可以被多个账户访问
    accounts = fields.ManyToManyField('models.Account', related_name='menus', through='account_menu')

    class Meta:
        table = "menus"
```

## accounts 表（Account 模型） - 登录账户表
```python
class Account(Model):
    id = fields.IntField(pk=True, generated=True)  # 主键，自增整数
    username = fields.CharField(max_length=50, unique=True)  # 用户名，唯一
    password = fields.CharField(max_length=100)  # 密码
    account_type = fields.CharField(max_length=20)  # 账户类型：admin或user
    create_time = fields.DatetimeField(auto_now_add=True)  # 创建时间

    class Meta:
        table = "accounts"
```